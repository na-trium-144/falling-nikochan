import { BeatSlime } from "@/edit/timingTab.js";

- Code タブでは譜面データをテキスト (Lua 言語のプログラム) として編集することができます。
  - TimingタブやNoteタブで編集した内容は自動的にCodeタブにも反映され、逆にCodeタブの編集も自動的に他のタブに反映されます。
- Codeタブを一切使わなくても譜面は作れますが、複数の音符をまとめて選択してコピペすることができたり、またLua言語が書ければ変数やループ、functionなどを使うこともできるので、使いこなせると便利かもしれません。
- 基本的なルールとしては、 テキストは上から順に読み、`Note()`が音符1つを表し、`Step()`が休符(音符と音符の間の空き時間)を表します。
  - Noteタブでは音符の追加と削除しかできず、すでに置かれている音符のタイミングをすべてずらすといったことはできませんが、
  Codeタブでは`Step()`を挿入したり削除するとそれ以降の音符のタイミングがすべてずれます。
- Codeタブを編集すると、自動的に編集したコードが実行されます。
  - エラーが発生した場合(文法が間違っている場合など)は下部に赤色でメッセージが表示されます。
  - エラーが表示されている状態でCodeタブ以外のタブへ移動すると、Codeタブの変更は保存されず、最後にエラーなく実行できた時点の内容に戻されてしまうので注意してください。
- Codeタブで`Note()`などの各種コマンドにカーソルを合わせると、タイムバーもその音符に対応する時刻に移動します(が100%正確ではないです)。
- Falling Nikochan 特有のコマンドは以下の通りです。
  - `Note(x, vx, vy, big, fall)`: 音符を置きます。
    - x, vx, vy は数値、big, fall は`true`または`false`を指定してください。
  - `Step(a, b)`: b 分音符 a 個分の休符を表します。 
    - a は0以上の整数、 b は1以上の整数にしてください。
  - `BPM(bpmの値)`: BPMを変更します。正の数値にしてください。
  - `Accel(速度の値)`: 速度を変更します。0や負の値も使えます。
  - `Beat(拍子)` または `Beat(拍子, a, b)`: 拍子を変更します。
    - 例えば 4/4 拍子なら `{{4, 4, 4, 4}}`、
    7/8 拍子なら `{{4, 4, 4, 8}}`、
    4/4 + 3/4 拍子なら `{{4, 4, 4, 4}, {4, 4, 4}}`
    のように指定します。
      - (<BeatSlime size={4} /> とは逆に左から右にカウントします)
    - 拍子カウントのオフセット ( a / b ) を拍子の後ろに指定できます。
    aは0以上の整数、bは1以上の整数です。
- `--` (半角のマイナス2つ)で始まる行はコメントです(何を書いても無視されます)。
- 無限ループなどを書くと停止する方法がなかったりするので注意してください。
- その他のLua言語の文法に関してはここでは説明しないので各自で調べてください。
