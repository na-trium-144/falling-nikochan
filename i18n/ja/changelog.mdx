{/* このファイルに追記した際には frontend/app/[locale]/common/version.ts の latestChangeLogMinor を変える */}

import { Key } from "@/common/key.js";
import { SlimeSVG } from "@/common/slime.js";
import { TranslateIcon, SunIcon, HelpIcon } from "@/common/mdxIcons.js";

## ver. 13.1 - 2025/09/25

- [APIリファレンス](https://nikochan.utcode.net/api) を追加しました。

## ver. 13.0 - 2025/09/21

- <span className="text-lg/6">𝕏</span> (Twitter) の公式アカウント [@nikochan144](https://twitter.com/nikochan144) を開設しました。譜面が新しく公開された際・更新された際に自動的にツイートされます。
- 譜面編集画面に音符のタップ音とメトロノーム音を追加しました
  - タイミングタブからオン/オフ切り替えと音量を設定できます
- 特にスマホ等で編集画面のカーソル移動が高速になりました
- 譜面編集のパスワードを <Key className="text-sm p-0.5 ">Enter</Key> でも送信可能にしました
- 音量調整などのスライダー入力の見た目を変更しました
- ローカルに保存した譜面ファイルを新規作成した譜面編集画面にドラッグ&ドロップすることでも読み込めるようにしました
- 譜面の速度をなめらかに加速・減速させる機能を追加しました
  - コードエディターでは `AccelEnd(bpm)` で指定します
- 譜面やプレイ記録を共有する際のテキストにデフォルトでハッシュタグ「#fallingnikochan」が含まれるようにしました
- 再生速度を ×1 以外にしてプレイした場合もプレイ記録を共有できるようにしました

## ver. 12.49 - 2025/09/02

- プレイ中の右クリックメニューを無効化しました。

## ver. 12.44 - 2025/07/29

- 新着譜面リストにすべての公開譜面が表示されるようにしました。
  - 下までスクロールすると続きが読み込まれます。
  - 検索結果表示時も同様に、続きを表示するボタンを押すのではなくスクロールするだけで読み込まれるようにしました。

## ver. 12.33 - 2025/07/12

- プレイ結果を画像として保存・共有する機能の追加

## ver. 12.30 - 2025/06/22

- 譜面の途中からプレイするオプション、再生速度を変更するオプションを追加しました

## ver. 12.21 - 2025/06/06

- iOSでSafariのバグにより起きる無反応を予測して補正する機能を追加
  - タップしても反応せずスルーされた場合、miss判定にならずコンボが継続します。(しない場合もあります)
  - タップ音は補正されないので、無反応補正が有効の場合タップ音はオフにしています。
- 短い間隔で大音符が並んでいる際の判定を修正しました

## ver. 12.19 - 2025/05/30

- 譜面エディタからのテストプレイによるプレイ回数は人気譜面リストの並び順に反映しないようにしました。
- 1ユーザーが複数回同じ譜面をプレイした場合のプレイ回数を少なくカウントするようにしました

## ver. 12.18 - 2025/05/29

- プレイ記録を共有した際にキーボード操作かタッチ操作かを示すアイコンが表示されるようにしました
- 保存済みのベストスコアからプレイ記録の共有リンクを生成できるようにしました
  - ver. 12.18 より前のバージョンでプレイした記録については、日付など一部の情報が表示されません。
- トップページの譜面リスト等で表示されるクリア状況などのバッジの色がレベルにあわせて変わるようにしました
  - 未プレイの譜面についてもレベルの数に合わせてドットが表示されるようにしました

## ver. 12.11 - 2025/05/18

- 譜面編集のコードエディターで Ctrl+F (⌘+F) を押すことで検索・置き換えができるようになりました。

## ver. 12.9 - 2025/05/17

- 画面内で出現・消滅する音符がフェードイン・フェードアウトするようになりました。

## ver. 12.8 - 2025/05/17

- サーバーに保存した譜面データを削除する機能を追加しました。
- 譜面エディタでレベルを削除する際に確認が表示されるようにしました。

## ver. 12.7 - 2025/05/10

- Falling Nikochan が対応するブラウザーバージョンを明確にしました。

## ver. 12.0 - 2025/05/06

- 曲名や作曲者などで譜面を検索する機能を実装しました。

## ver. 11.35 - 2025/05/06

- AndroidのChromeで音符を叩くたびに処理速度が遅くなるのを改善しました

## ver. 11.30 - 2025/05/03

- アプリとしてホーム画面に追加する際のアイコンや色設定などを変更しました
  - すでにホーム画面に追加済みのアイコンが自動で更新されない場合は、削除してから再度追加してください
- 一部のニコチャンの顔を変更しました

## ver. 11.27 - 2025/05/02

- iPadのような画面サイズでプレイする際の曲名などの表示を大きくしました。

## ver. 11.21 - 2025/04/28

- iOS16以下で背景が真っ白に表示されるのを修正しました。

## ver. 11.19 - 2025/04/24

- サンプル譜面リストを更新しました。

## ver. 11.6 - 2025/04/16

- 譜面リストとレベル選択リストでクリア・フルコンボ状況がわかるバッジの表示を追加しました

## ver. 11.0 - 2025/04/13

- 譜面作成時に再生する動画の開始位置と終了位置を変更できるようにしました。
- 譜面編集でコピーした音符の情報が譜面データといっしょに保存されるようにしました (ローカルに保存したファイルにも、サーバーに保存したものにも)

## ver. 10.9 - 2025/04/03

- プレイ中のフレームレートを制限するオプションを追加しました
  - フレームレートを小さくするほど動作が軽くなります。
  - スクリーンのフレームレートが60fpsを超える端末では、デフォルトでは60fps以下の値に設定されるようにしました。
    - PCなどの高性能な環境であれば手動でより高い値に変更しても構いません。

## ver. 10.5 - 2025/04/02

- スマホなど縦長表示の場合のUIを変更しました。
- 譜面IDを入力してプレイする欄と 最近プレイした譜面リスト はトップページ(ホームタブ)に移動しました。

## ver. 10.0 - 2025/03/30

- Falling Nikochan をPWAアプリとしてインストールして遊ぶことができるようにしました。
  - Androidでは Falling Nikochan のトップページ
  (または [Falling Nikochan とは？](/main/about/1) の概要ページ)
  に表示される「ホーム画面に追加」ボタンをタップすることでインストールできます。
  - iOSではSafariで共有ボタンから「ホーム画面に追加」を選択することでインストールできます。
  - ホーム画面からアプリとして起動するとブラウザのツールバーが非表示になり、フルスクリーンで快適にプレイできます。
  - (また、アプリとして起動した場合はアプリ全体をダウンロードしてから起動するため、インターネット接続が遅い環境でのページの読み込みが速くなります。)
    - ver. 10.12〜: ブラウザで起動した場合にも同様の動作をするようにしたため差はありません
    - ただしオフラインでのプレイはできません。
- 音符を叩いたときのタップ音を実装しました。
  - プレイ前のオプション画面でオン・オフを選択できます。
  - Windows,Linux,MacOS(Safari以外)とAndroidでは、音声出力の遅延分だけ自動で判定タイミングが補正されます。
  - MacOS(Safari)とiOSでは、音声出力の遅延を検出できないため、判定オフセットを手動で調整する必要がある場合があります。
  またこのためデフォルトではタップ音はオフにしています。
- プレイ時のYouTubeの再生音量とタップ音の音量を調整できるようにしました。
- プレイ中に画面上部に停止ボタンを追加しました。

## ver. 9.17 - 2025/03/28

- 音符間隔が狭い場合でもコンボ数とスコア表示のアニメーションがなめらかに動くようになりました

## ver. 9.13 - 2025/03/21

- 共有リンクをコピーした際、URLだけでなくタイトルも含めるようにしました

## ver. 9.10 - 2025/03/21

- 楽曲の詳細画面でレベルを選択するUIが変わりました
- 譜面のレベル選択時と、プレイ後の結果表示時に、他のプレイヤーのスコア記録がグラフ表示される機能を追加しました
  - ver.9.0 (2025/03/11) 以降のプレイ記録のみが対象です
- 直近のプレイ回数の多い順に表示する人気順の譜面リストを追加しました

## ver. 9.4 - 2025/03/12

- <SlimeSVG />の動きがなめらかになりました。
- その他プレイ画面の表示やエフェクトなどを一部変更しました。

## ver. 9.0 - 2025/03/11

- Falling Nikochan のドメイン(URL)が nikochan.utcode.net に変更されました。
- 譜面編集でのパスワードの管理方法を変更したので、これまでにブラウザーに保存したパスワードは使用できません。再度入力しなおす必要があります。
  - サーバーにアップロードされた譜面のパスワード自体は変わっていません。
- 各譜面のプレイ回数カウントを削除しました。
  - 近日中に仕様変更して復活させるかも
- [利用規約](/main/policies) を一部更新しました。作成した譜面をサーバーに保存した際にIPアドレスが保存されることを明記しました。

## ver. 8.16 - 2025/03/06

- ゲームプレイ画面の読み込み処理を改善し、 Loading... 表示がなくなりました(極端にネット環境が悪くない限り)
- 各種エラーメッセージを日本語化しました

## ver. 8.15 - 2025/03/04

- プレイする 画面から楽曲を選択したときに新しいページに切り替えることなく詳細が表示されるようにしました。

## ver. 8.12 - 2025/03/03

- プレイ後の結果を共有する機能を追加
  - 結果表示画面で「リンクをコピー」または「共有」を押して共有すると、リンクのプレビューとしてプレイ結果が表示されます。

## ver. 8.7 - 2025/02/28

- 共有用リンクをSNS等各種アプリで共有した際にプレビュー画像が表示されるようになりました。

## ver. 8.0 - 2025/02/22

- 譜面データの仕様変更 (〜.fn8.yml)
  - ローカルに保存した場合のファイルサイズが今までよりも小さくなりました。
  - ver. 7 の譜面データは自動的に ver. 8 に変換されます。この変換は100%互換性があり譜面の挙動が変わることはありません。
- 隠し機能としてプレイ中の音符速度変化の表示を実装
    - URLに `&speed=1` を追加すると表示されます。
- アップロードできる譜面サイズの制限を 1000kB まで から、イベント数基準で 20000 イベントまで に変更しました

## ver. 7.15 - 2025/02/21

- <img
    src={process.env.ASSET_PREFIX + "/assets/slime.svg"}
    className="inline-block w-6 "
  /> に加えて <img
    src={process.env.ASSET_PREFIX + "/assets/slime2.svg"}
    className="inline-block w-6 "
  /> の画像を追加し、アニメーションするようにした

## ver. 7.11 - 2025/02/14

- プレイ時のオプションで音源オフセット調整機能を追加しました。

## ver. 7.6 - 2025/02/12

- トップページの譜面リストのレイアウトを改良し、それぞれの譜面の YouTube サムネイル画像と、また新着譜面リストでは日時の表示を追加しました

## ver. 7.5 - 2025/02/12

- プレイ中のコンボ数の表示色の仕様を変更
  - 従来のように 100 コンボ到達時に突然色が変わるのではなく、コンボ数に応じて徐々に色が変わる
  - だめ、ミス判定が 1 つでもある場合はコンボ数によらず色が変わらない

## ver. 7.0 - 2025/02/11

- 譜面データの仕様変更 (〜.fn7.yml): 音符の表示開始位置を画面上側から降ってくるだけにするか下側から投げ上げる形にするかを指定できるようにしました。
  - これにより例えば真上から降ってくる音符 (vx = 0) などが実現可能になります
  - プレイ画面では従来の譜面データを読み込む際には従来のプログラムを使用し、今までとまったく同じ挙動をします。
  - 譜面編集画面では従来の譜面データを読み込んで上書き保存すると ver. 7 の譜面形式に変換され、この仕様変更により一部の音符の挙動が今までと変わってしまう可能性があります。意図しない譜面になっていないかテストプレイ等で確認してください。
- アプリ全体が英語に対応しました。ブラウザーの設定などを自動で判別しますが、画面下部の <TranslateIcon /> Language ボタンで切り替えることもできます。
  - プレイ画面や編集画面で一部英語表記だった箇所も、日本語表示モードではほぼすべて日本語で表示されるようになりました。
  - なんとなく「Chain」が「コンボ」に、
    またそれぞれの判定「Good」「OK」「Bad」「Miss」が「よい」「まあまあ」「だめ」「ミス」
    に変わっています。
- プレイ画面での楽曲タイトルなどの表示を大きくしました。
- 譜面編集のヘルプ画面の記述を減らし、読みやすくなりました。より詳細な説明は編集画面内の <HelpIcon /> にカーソルを合わせる (またはタップする) ことで表示されます。
- 譜面編集でパスワードを保存するかどうかをユーザーが選択できるようにしました
- アプリが更新されたとき、この更新履歴ページへのリンク (画面下部のバージョン番号のところ) に未読マークが表示されるようにしました。

## ver. 6.11 - 2024/11/24

- 譜面を一般公開する 機能を追加 / 「新着譜面」リストをトップページ (プレイする ページ) に追加しました
  - (これより前にアップロードされた譜面に関してはデフォルトで非公開状態になっています。)
  - 新しい順に 25 譜面まで表示されます。ぜひ気軽に投稿してみてください。

## ver. 6.1 - 2024/11/17

- 譜面編集でローカルに保存するファイルの形式を変更しました。(〜.fn6.yml)
  - メモ帳などのテキストエディタで開くことができます。
  - 以前の形式 (〜.fn5.mpk など) のファイルも引き続き読み込めます。(自動的に新しいフォーマットに変換されます)

## ver. 5.28 - 2024/11/15

- サーバーにアップロードした譜面の中で一部のレベルを非公開にする機能を追加
  - 譜面編集画面の Level タブでレベルを選択して「このレベルを非表示にする」にチェックを入れると、譜面の共有画面に表示されなくなります

## ver. 5.26 - 2024/11/12

- リザルト画面の表示を改良

## ver. 5.25 - 2024/11/10

- ニコチャンを叩いたときのエフェクト表示を追加しました。
  - その代わりニコチャンの右上に表示していたスコア倍率表示は消しました
- 隠し機能として現在のフレームレートを表示させる機能を追加しました
  - プレイ画面で URL の末尾に `&fps=` を追加すると左下に表示されます

## ver. 5.22 - 2024/11/09

- ダークテーマを実装しました。メニュー等のページで右下の <SunIcon /> Theme ボタンから切り替えられます。
- プレイ画面と編集画面が常に新しいタブで開くようにしました

## ver. 5.19 - 2024/11/05

- プレイ中の YouTube 動画が最後まで再生された場合に再度自動再生してしまうバグを修正

## ver. 5.17 - 2024/11/05

- 譜面編集画面の改善
  - 1/30 秒送りボタンを追加し、操作ボタンの並び順を変更しました
  - 1 小節送りボタンのキーを <Key className="text-sm p-0.5 ">Shift</Key> + 左右キー ではなく <Key className="text-sm p-0.5">PageUp</Key> / <Key className="text-sm p-0.5">PageDown</Key> に変更
  - タッチ操作時、画面上の音符を触ると位置が動かせる機能をオン/オフ切り替えるボタンを追加、その他操作性改善

## ver. 5.15 - 2024/11/02

- 最近プレイした譜面 / 最近編集した譜面のリストの表示を改良
  - 最後にプレイしたものが一番上に来るようにしました
  - 最初の 5 つのみを表示し、「すべて表示」ボタンを押すことで残りを表示するようにしました

## ver. 5.14 - 2024/10/31

- プレイ中に再生時間の表示を追加

## ver. 5.12 - 2024/10/30

- バージョン番号の表記と更新履歴を追加しました。

## ver. 5 - 2024/10/20

- 拍子変化を実装

## ver. 4 - 2024/10/11

- 1つの譜面に複数のレベルを作成可能にした

## ver. 3 - 2024/10/07

- コードエディター、Luaでの譜面記述方法を導入

## ver. 2 - 2024/09/29

## ver. 1 - 2024/09/25
